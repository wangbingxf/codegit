$define("dotdotdot",[],function(t){!function(w,e){if(!w.fn.dotdotdot){w.fn.dotdotdot=function(t){if(0==this.length)return w.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this;if(1<this.length)return this.each(function(){w(this).dotdotdot(t)});var o=this,i=o.contents();o.data("dotdotdot")&&o.trigger("destroy.dot"),o.data("dotdotdot-style",o.attr("style")||""),o.css("word-wrap","break-word"),"nowrap"===o.css("white-space")&&o.css("white-space","normal"),o.bind_events=function(){return o.bind("update.dot",function(t,e){switch(o.removeClass("is-truncated"),t.preventDefault(),t.stopPropagation(),typeof l.height){case"number":l.maxHeight=l.height;break;case"function":l.maxHeight=l.height.call(o[0]);break;default:l.maxHeight=function a(t){for(var e=t.innerHeight(),n=["paddingTop","paddingBottom"],r=0,o=n.length;r<o;r++){var i=parseInt(t.css(n[r]),10);isNaN(i)&&(i=0),e-=i}return e}(o)}l.maxHeight+=l.tolerance,void 0!==e&&(("string"==typeof e||"nodeType"in e&&1===e.nodeType)&&(e=w("<div />").append(e).contents()),e instanceof w&&(i=e)),(u=o.wrapInner('<div class="dotdotdot" />').children()).contents().detach().end().append(i.clone(!0)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var n=!1,r=!1;return c.afterElement&&((n=c.afterElement.clone(!0)).show(),c.afterElement.detach()),b(u,l)&&(r="children"==l.wrap?function s(t,e,n){var r=t.children(),o=!1;t.empty();for(var i=0,a=r.length;i<a;i++){var d=r.eq(i);if(t.append(d),n&&t.append(n),b(t,e)){d.remove(),o=!0;break}n&&n.detach()}return o}(u,l,n):function d(e,n,r,o,i){var a=!1;e.contents().detach().each(function(){var t=w(this);if(void 0===this)return!0;if(t.is("script, .dotdotdot-keep"))e.append(t);else{if(a)return!0;e.append(t),!i||t.is(o.after)||t.find(o.after).length||e[e.is("a, table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style")?"after":"append"](i),b(r,o)&&(a=3==this.nodeType?h(t,n,r,o,i):d(t,n,r,o,i)),a||i&&i.detach()}});n.addClass("is-truncated");return a}(u,o,u,l,n)),u.replaceWith(u.contents()),u=null,w.isFunction(l.callback)&&l.callback.call(o[0],r,i),c.isTruncated=r}).bind("isTruncated.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(o[0],c.isTruncated),c.isTruncated}).bind("originalContent.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(o[0],i),i}).bind("destroy.dot",function(t){t.preventDefault(),t.stopPropagation(),o.unwatch().unbind_events().contents().detach().end().append(i).attr("style",o.data("dotdotdot-style")||"").removeClass("is-truncated").data("dotdotdot",!1)}),o},o.unbind_events=function(){return o.unbind(".dot"),o},o.watch=function(){if(o.unwatch(),"window"==l.watch){var t=w(window),e=t.width(),n=t.height();t.bind("resize.dot"+c.dotId,function(){e==t.width()&&n==t.height()&&l.windowResizeFix||(e=t.width(),n=t.height(),a&&clearInterval(a),a=setTimeout(function(){o.trigger("update.dot")},100))})}else r=s(o),a=setInterval(function(){if(o.is(":visible")){var t=s(o);r.width==t.width&&r.height==t.height||(o.trigger("update.dot"),r=t)}},500);return o},o.unwatch=function(){return w(window).unbind("resize.dot"+c.dotId),a&&clearInterval(a),o};var l=w.extend(!0,{},w.fn.dotdotdot.defaults,t),c={},r={},a=null,u=null;return l.lastCharacter.remove instanceof Array||(l.lastCharacter.remove=w.fn.dotdotdot.defaultArrays.lastCharacter.remove),l.lastCharacter.noEllipsis instanceof Array||(l.lastCharacter.noEllipsis=w.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),c.afterElement=function n(t,e){return!!t&&("string"!=typeof t?!!t.jquery&&t:!!(t=w(t,e)).length&&t)}(l.after,o),c.isTruncated=!1,c.dotId=d++,o.data("dotdotdot",!0).bind_events().trigger("update.dot"),l.watch&&o.watch(),o},w.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0},w.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","　",",",";",".","!","?"],noEllipsis:[]}},w.fn.dotdotdot.debug=function(t){};var d=1,n=w.fn.html;w.fn.html=function(t){return t!=e&&!w.isFunction(t)&&this.data("dotdotdot")?this.trigger("update",[t]):n.apply(this,arguments)};var r=w.fn.text;w.fn.text=function(t){return t!=e&&!w.isFunction(t)&&this.data("dotdotdot")?(t=w("<div />").text(t).html(),this.trigger("update",[t])):r.apply(this,arguments)}}function h(t,e,n,r,o){var i=t[0];if(!i)return!1;var a=x(i),d=-1!==a.indexOf(" ")?" ":"　",s="letter"==r.wrap?"":d,l=a.split(s),c=-1,u=-1,h=0,f=l.length-1;for(r.fallbackToLetter&&0==h&&0==f&&(s="",f=(l=a.split(s)).length-1);h<=f&&(0!=h||0!=f);){var p=Math.floor((h+f)/2);if(p==u)break;u=p,m(i,l.slice(0,u+1).join(s)+r.ellipsis),n.children().each(function(){w(this).toggle().toggle()}),b(n,r)?(f=u,r.fallbackToLetter&&0==h&&0==f&&(s="",u=c=-1,f=(l=l[h=0].split(s)).length-1)):h=c=u}if(-1==c||1==l.length&&0==l[0].length){var g=t.parent();t.detach();var v=o&&o.closest(g).length?o.length:0;g.contents().length>v?i=C(g.contents().eq(-1-v),e):(i=C(g,e,!0),v||g.detach()),i&&(m(i,a=y(x(i),r)),v&&o&&w(i).parent().append(o))}else m(i,a=y(l.slice(0,c+1).join(s),r));return!0}function b(t,e){return t.innerHeight()>e.maxHeight}function y(t,e){for(;-1<w.inArray(t.slice(-1),e.lastCharacter.remove);)t=t.slice(0,-1);return w.inArray(t.slice(-1),e.lastCharacter.noEllipsis)<0&&(t+=e.ellipsis),t}function s(t){return{width:t.innerWidth(),height:t.innerHeight()}}function m(t,e){t.innerText?t.innerText=e:t.nodeValue?t.nodeValue=e:t.textContent&&(t.textContent=e)}function x(t){return t.innerText?t.innerText:t.nodeValue?t.nodeValue:t.textContent?t.textContent:""}function i(t){for(;(t=t.previousSibling)&&1!==t.nodeType&&3!==t.nodeType;);return t}function C(t,e,n){var r,o=t&&t[0];if(o){if(!n){if(3===o.nodeType)return o;if(w.trim(t.text()))return C(t.contents().last(),e)}for(r=i(o);!r;){if((t=t.parent()).is(e)||!t.length)return!1;r=i(t[0])}if(r)return C(w(r),e)}return!1}}(jQuery),jQuery(document).ready(function(i){i(".dot-ellipsis").each(function(){var t=i(this).hasClass("dot-resize-update"),e=i(this).hasClass("dot-timer-update"),r=0,n=i(this).attr("class").split(/\s+/);i.each(n,function(t,e){var n=e.match(/^dot-height-(\d+)$/);null!==n&&(r=Number(n[1]))});var o=new Object;e&&(o.watch=!0),t&&(o.watch="window"),0<r&&(o.height=r),i(this).dotdotdot(o)})}),jQuery(window).load(function(){jQuery(".dot-ellipsis.dot-load-update").trigger("update.dot")})});